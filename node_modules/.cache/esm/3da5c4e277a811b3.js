let mongoose,categorySchema;_77a‍.x([["addCategory",()=>addCategory],["deleteCategory",()=>deleteCategory]]);_77a‍.w("mongoose",[["default",["mongoose"],function(v){mongoose=v}]]);_77a‍.w("../models/category",[["default",["categorySchema"],function(v){categorySchema=v}]]);


 const Category = mongoose.model("Category" , categorySchema) 

//  Ajouter un category   
const addCategory = async (req ,res) => { 
    try {  
        const {name ,icon ,color}  = req.body  ;
        
        let category = new Category ({
            name ,
            icon ,  
            color 
        })
            _77a‍.g.console.log("Mes nouveaux category à ajoute sont ==>" , category) ;
            await category.save() 
       if(category) {
           res.status(201).send("Category ajouté avec success")
       } 
       else {
           throw new Error ("probléme d'jout de category ")
       }
         
    } catch (error) {
        res.status(400).send(error)
    }
} 
// Supprimer un category 

const deleteCategory = async (req,res) => {
    try {
        const category = await Category.deleteOne({
            _id : req.params.idcat 
        }) 
        if (category) {
            res.status(200).json({
                message : "Suppression réussi"
            })
        } 
        else {
            throw new Error("suppression non réussi ")
        }
    } catch (error) {
        res.status(400).send(error)
    }
}

