let express,dotenv,morgan,mongoose,routerCategory,routerProduct,cors;_9bc‍.w("express",[["default",["express"],function(v){express=v}]]);_9bc‍.w("dotenv",[["default",["dotenv"],function(v){dotenv=v}]]);_9bc‍.w("morgan",[["default",["morgan"],function(v){morgan=v}]]);_9bc‍.w("mongoose",[["default",["mongoose"],function(v){mongoose=v}]]);_9bc‍.w("./routes/category",[["default",["routerCategory"],function(v){routerCategory=v}]]);_9bc‍.w("./routes/products",[["default",["routerProduct"],function(v){routerProduct=v}]]);_9bc‍.w("cors",[["default",["cors"],function(v){cors=v}]]);
 

 




const app = express() ;  

dotenv.config() ; 

const port = process.env.PORT ; 
const api = process.env.API_URl  ;  

// Middleware  
app.use(cors()) 

app.use(express.urlencoded({
    extended : true
})) 
app.use(express.json()) 

// morgan pour enrigistrer les requetes http pour node js (utilisation d'une chaine de format prédéfinie)
app.use(morgan('tiny')) 

//connection avec ma base de donnée .
mongoose.connect(process.env.CONNECTION_STRING,{
    useNewUrlParser: true,
    useUnifiedTopology: true
}) 
.then(()=> console.log("connection à la base de donnée réussie"))
.catch(()=>console.log("connection à la base donnée échouée "))
// app.get(`${api}/products` ,(req,res)=>{ 
    
//     res.send("hello")
// })  
app.use(`${api}` , routerCategory)
app.use( `${api}`, routerProduct)

app.listen(port ,()=>{ 
    console.log(`Le serveur est lancé sur le port ${port}`)
})